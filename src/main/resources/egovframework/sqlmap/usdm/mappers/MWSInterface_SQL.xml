<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.usdm.service.impl.MWSInterfaceMapper">

	<resultMap id="loginSession" type="egovframework.usdm.service.LoginSessionVO">
		<result property="userID" column="userID"/>
		<result property="userPW" column="userPW"/>
		<result property="sessionKey" column="sessionKey"/>
	</resultMap>
	
	<resultMap id="snGateway" type="egovframework.usdm.service.SNGatewayVO">
		<result property="GID" column="GID"/>
		<result property="gwID" column="gwID"/>
		<result property="url" column="url"/>
		<result property="manufacturer" column="manufacturer"/>
		<result property="productNo" column="productNo"/>
		<result property="location" column="location"/>
		<result property="longitude" column="longitude"/>
		<result property="latitude" column="latitude"/>
		<result property="altitude" column="altitude"/>
		<result property="dateTime" column="numPixel"/>
		<result property="supportedTransportProtocolList" column="supportedTransportProtocolList"/>
		<result property="supportedTransportConnectionControlList" column="supportedTransportConnectionControlList"/>
		<result property="supportedTransportDirectionList" column="supportedTransportDirectionList"/>
		<result property="supportedOperationList" column="supportedOperationList"/>
		<result property="supportedAttributeList" column="supportedAttributeList"/>
		<result property="supportedSensorServiceCenterList" column="supportedSensorServiceCenterList"/>
		<result property="panIDList" column="panIDList"/>
		<result property="monitoringMode" column="monitoringMode"/>
		<result property="monitoringPeriod" column="monitoringPeriod"/>
		<result property="statusCode" column="statusCode"/>
		<result property="deleteCode" column="deleteCode"/>
		<result property="nickName" column="nickName"/>
		<result property="X" column="X"/>
		<result property="Y" column="Y"/>
	</resultMap>

	<resultMap id="snPan" type="egovframework.usdm.service.SNPanVO">
		<result property="gwGID" column="gwGID"/>
		<result property="GID" column="GID"/>
		<result property="gwID" column="gwID"/>
		<result property="panID" column="panID"/>
		<result property="topology" column="topology"/>
		<result property="protocolStack" column="protocolStack"/>
		<result property="panChannel" column="panChannel"/>
		<result property="supportedChannelList" column="supportedChannelList"/>
		<result property="supportedTopologyList" column="supportedTopologyList"/>
		<result property="supportedProtocolStackList" column="supportedProtocolStackList"/>
		<result property="supportedOperationList" column="supportedOperationList"/>
		<result property="supportedAttributeList" column="supportedAttributeList"/>
		<result property="snIDList" column="snIDList"/>
		<result property="statusCode" column="statusCode"/>
		<result property="deleteCode" column="deleteCode"/>
		<result property="nickName" column="nickName"/>
	</resultMap>
	
	<resultMap id="snNode" type="egovframework.usdm.service.SNNodeVO">
		<result property="gwGID" column="gwGID"/>
		<result property="panGID" column="panGID"/>
		<result property="GID" column="GID"/>
		<result property="gwID" column="gwID"/>
		<result property="panID" column="panID"/>
		<result property="snID" column="snID"/>
		<result property="globalID" column="globalID"/>
		<result property="manufacturer" column="manufacturer"/>
		<result property="productNo" column="productNo"/>
		<result property="location" column="location"/>
		<result property="longitude" column="longitude"/>
		<result property="latitude" column="latitude"/>
		<result property="altitude" column="altitude"/>
		<result property="role" column="role"/>
		<result property="roleList" column="roleList"/>
		<result property="parentNodeIDList" column="parentNodeIDList"/>
		<result property="supportedOperationList" column="supportedOperationList"/>
		<result property="supportedAttributeList" column="supportedAttributeList"/>
		<result property="tdIDList" column="tdIDList"/>
		<result property="monitoringMode" column="monitoringMode"/>
		<result property="monitoringPeriod" column="monitoringPeriod"/>
		<result property="statusCode" column="statusCode"/>
		<result property="deleteCode" column="deleteCode"/>
		<result property="nickName" column="nickName"/>
	</resultMap>
	
	<resultMap id="snTransducer" type="egovframework.usdm.service.SNTransducerVO">
		<result property="gwGID" column="gwGID"/>
		<result property="panGID" column="panGID"/>
		<result property="snGID" column="snGID"/>
		<result property="gwID" column="gwID"/>
		<result property="panID" column="panID"/>
		<result property="snID" column="snID"/>
		<result property="tdID" column="tdID"/>
		<result property="manufacturer" column="manufacturer"/>
		<result property="productNo" column="productNo"/>
		<result property="transducerCategory" column="transducerCategory"/>
		<result property="transducerType" column="transducerType"/>
		<result property="unit" column="unit"/>
		<result property="dataType" column="dataType"/>
		<result property="rangeMin" column="rangeMin"/>
		<result property="rangeMax" column="rangeMax"/>
		<result property="rangeOffset" column="rangeOffset"/>
		<result property="level" column="level"/>
		<result property="supportedOperationList" column="supportedOperationList"/>
		<result property="supportedAttributeList" column="supportedAttributeList"/>
		<result property="statusCode" column="statusCode"/>
		<result property="actuationResult" column="actuationResult"/>
		<result property="deleteCode" column="deleteCode"/>
		<result property="nickName" column="nickName"/>
	</resultMap>
	
	<resultMap id="snSensingValue" type="egovframework.usdm.service.SNSensingValueVO">
		<result property="gwID" column="gwID"/>
		<result property="panID" column="panID"/>
		<result property="snID" column="snID"/>
		<result property="tdID" column="tdID"/>
		<result property="reportTime" column="reportTime"/>
		<result property="sensingTime" column="sensingTime"/>
		<result property="sensorType" column="sensorType"/>
		<result property="sensingValue" column="sensingValue"/>
		<result property="binaryValue" column="binaryValue"/>
	</resultMap>

	<select id="validateSessionKey" parameterType="LoginSessionVO" resultType="egovMap">
		<![CDATA[
			SELECT NVL(MAX('Y'), 'N') AS validYn
			  FROM sdm_LoginSession
			 WHERE sessionKey = #{sessionKey}
		]]>
	</select>
	
	<select id="selectLoginSession" parameterType="LoginSessionVO" resultType="egovMap">
		<![CDATA[
			SELECT userID
				 , userPW
				 , sessionKey
			  FROM sdm_LoginSession
			 WHERE userID = #{userID}
		]]>
	</select>
	
	<update id="updateSessionKeyLogin" parameterType="LoginSessionVO">
		<![CDATA[
			UPDATE sdm_LoginSession
			   SET sessionKey = #{sessionKey}
			 WHERE userID = #{userID}
		]]>
	</update>
	
	<update id="updateSessionKeyLogout" parameterType="LoginSessionVO">
		<![CDATA[
			UPDATE sdm_LoginSession
			   SET sessionKey = ''
			 WHERE userID = #{userID}
		]]>
	</update>
	
	<select id="selectExistingGateway" parameterType="SNGatewayVO" resultType="egovMap">
		<![CDATA[
			SELECT NVL(MAX('Y'), 'N') AS existYn
			  FROM sdm_Gateway
			 WHERE gwID = #{gwID}
		]]>
	</select>
	
	<select id="selectExistingGatewayByID" parameterType="SNGatewayVO" resultType="egovMap">
		<![CDATA[
			SELECT NVL(MAX('Y'), 'N') AS existYn
			  FROM sdm_Gateway
			 WHERE GID = #{GID}
		]]>
	</select>
	
	<select id="selectExistingPan" parameterType="SNPanVO" resultType="egovMap">
		<![CDATA[
			SELECT NVL(MAX('Y'), 'N') AS existYn
			  FROM sdm_Pan
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
		]]>
	</select>
	
	<select id="selectExistingPanByID" parameterType="SNPanVO" resultType="egovMap">
		<![CDATA[
			SELECT NVL(MAX('Y'), 'N') AS existYn
			  FROM sdm_Pan
			 WHERE GID = #{GID}
		]]>
	</select>
	
	<select id="selectExistingNode" parameterType="SNNodeVO" resultType="egovMap">
		<![CDATA[
			SELECT NVL(MAX('Y'), 'N') AS existYn
			  FROM sdm_Node
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
		]]>
	</select>
	
	<select id="selectExistingNodeByID" parameterType="SNNodeVO" resultType="egovMap">
		<![CDATA[
			SELECT NVL(MAX('Y'), 'N') AS existYn
			  FROM sdm_Node
			 WHERE GID = #{GID}
		]]>
	</select>
	
	<select id="selectExistingTransducer" parameterType="SNTransducerVO" resultType="egovMap">
		<![CDATA[
			SELECT NVL(MAX('Y'), 'N') AS existYn
			  FROM sdm_Transducer
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
			   AND tdID  = #{tdID}
		]]>
	</select>
	
	<insert id="insertGateway" parameterType="SNGatewayVO">
		<![CDATA[
			INSERT INTO sdm_Gateway (
						gwID
					  , url
					  , manufacturer
					  , productNo
					  , location
					  , longitude
					  , latitude
					  , altitude
					  , dateTime
					  , supportedTransportProtocolList
					  , supportedTransportConnectionControlList
					  , supportedTransportDirectionList
					  , supportedOperationList
					  , supportedAttributeList
					  , supportedSensorServiceCenterList
					  , panIDList
					  , monitoringMode
					  , monitoringPeriod
					  , statusCode
					  , position
					  , deleteCode
					  , nickName
					  )
				VALUES (
						#{gwID}
					  , #{url}
					  , #{manufacturer}
					  , #{productNo}
					  , #{location}
					  , #{longitude}
					  , #{latitude}
					  , #{altitude}
					  , #{dateTime}
					  , #{supportedTransportProtocolList}
					  , #{supportedTransportConnectionControlList}
					  , #{supportedTransportDirectionList}
					  , #{supportedOperationList}
					  , #{supportedAttributeList}
					  , #{supportedSensorServiceCenterList}
					  , #{panIDList}
					  , #{monitoringMode}
					  , #{monitoringPeriod}
					  , #{statusCode}
					  , ST_POINTFROMTEXT('POINT(${X} ${Y})',0)
					  , #{deleteCode}
					  , #{nickName}
					  )  
		]]>
	</insert>
	
	<insert id="insertGatewayByID" parameterType="SNGatewayVO">
		<![CDATA[
			INSERT INTO sdm_Gateway (
						gwID
					  , GID
					  , url
					  , manufacturer
					  , productNo
					  , location
					  , longitude
					  , latitude
					  , altitude
					  , dateTime
					  , supportedTransportProtocolList
					  , supportedTransportConnectionControlList
					  , supportedTransportDirectionList
					  , supportedOperationList
					  , supportedAttributeList
					  , supportedSensorServiceCenterList
					  , panIDList
					  , monitoringMode
					  , monitoringPeriod
					  , statusCode
					  , position
					  , deleteCode
					  , nickName
					  )
				VALUES (
						#{gwID}
					  , #{GID}
					  , #{url}
					  , #{manufacturer}
					  , #{productNo}
					  , #{location}
					  , #{longitude}
					  , #{latitude}
					  , #{altitude}
					  , #{dateTime}
					  , #{supportedTransportProtocolList}
					  , #{supportedTransportConnectionControlList}
					  , #{supportedTransportDirectionList}
					  , #{supportedOperationList}
					  , #{supportedAttributeList}
					  , #{supportedSensorServiceCenterList}
					  , #{panIDList}
					  , #{monitoringMode}
					  , #{monitoringPeriod}
					  , #{statusCode}
					  , ST_POINTFROMTEXT('POINT(${X} ${Y})',0)
					  , #{deleteCode}
					  , #{nickName}
					  )  
		]]>
	</insert>
	
	<update id="updateGateway" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Gateway
			   SET url 										= #{url}
				 , manufacturer 							= #{manufacturer}
				 , productNo 								= #{productNo}
				 , location 								= #{location}
				 , longitude								= #{longitude}
				 , latitude									= #{latitude}
		  		 , altitude									= #{altitude}
				 , dateTime 								= #{dateTime}
				 , supportedTransportProtocolList 			= #{supportedTransportProtocolList}
				 , supportedTransportConnectionControlList 	= #{supportedTransportConnectionControlList}
				 , supportedTransportDirectionList 			= #{supportedTransportDirectionList}
				 , supportedOperationList 					= #{supportedOperationList}
				 , supportedAttributeList 					= #{supportedAttributeList}
				 , supportedSensorServiceCenterList 		= #{supportedSensorServiceCenterList}
				 , panIDList								= #{panIDList}
				 , monitoringMode 							= #{monitoringMode}
				 , monitoringPeriod 						= #{monitoringPeriod}
				 , statusCode 								= #{statusCode}
				 , position 								= ST_POINTFROMTEXT('POINT(${X} ${Y})',0)
				 , deleteCode 								= #{deleteCode}
				 , nickName 								= #{nickName}
			 WHERE gwID = #{gwID}
		]]>
	</update>
	
	<update id="updateGatewayByID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Gateway
			   SET url 										= #{url}
				 , manufacturer 							= #{manufacturer}
				 , productNo 								= #{productNo}
				 , location 								= #{location}
				 , longitude								= #{longitude}
				 , latitude									= #{latitude}
		  		 , altitude									= #{altitude}
				 , dateTime 								= #{dateTime}
				 , supportedTransportProtocolList 			= #{supportedTransportProtocolList}
				 , supportedTransportConnectionControlList 	= #{supportedTransportConnectionControlList}
				 , supportedTransportDirectionList 			= #{supportedTransportDirectionList}
				 , supportedOperationList 					= #{supportedOperationList}
				 , supportedAttributeList 					= #{supportedAttributeList}
				 , supportedSensorServiceCenterList 		= #{supportedSensorServiceCenterList}
				 , panIDList								= #{panIDList}
				 , monitoringMode 							= #{monitoringMode}
				 , monitoringPeriod 						= #{monitoringPeriod}
				 , statusCode 								= #{statusCode}
				 , position 								= ST_POINTFROMTEXT('POINT(${X} ${Y})',0)
				 , deleteCode 								= #{deleteCode}
				 , nickName 								= #{nickName}
			 WHERE GID = #{GID}
		]]>
	</update>
	
	<insert id="insertPan" parameterType="SNPanVO">
		<![CDATA[
			INSERT INTO sdm_Pan (
						gwID
					  , panID
					  , topology
					  , protocolStack
					  , panChannel
					  , supportedChannelList
					  , supportedTopologyList
					  , supportedProtocolStackList
					  , supportedOperationList
					  , supportedAttributeList
					  , snIDList
					  , statusCode
					  , deleteCode
					  , nickName
					  )
				VALUES (
						#{gwID}
					  , #{panID}
					  , #{topology}
					  , #{protocolStack}
					  , #{panChannel}
					  , #{supportedChannelList}
					  , #{supportedTopologyList}
					  , #{supportedProtocolStackList}
					  , #{supportedOperationList}
					  , #{supportedAttributeList}
					  , #{snIDList}
					  , #{statusCode}
					  , #{deleteCode}
					  , #{nickName}
					  )  
		]]>
	</insert>
	
	<insert id="insertPanByID" parameterType="SNPanVO">
		<![CDATA[
			INSERT INTO sdm_Pan (
						gwID
					  , panID
					  , GID
					  , gwGID
					  , topology
					  , protocolStack
					  , panChannel
					  , supportedChannelList
					  , supportedTopologyList
					  , supportedProtocolStackList
					  , supportedOperationList
					  , supportedAttributeList
					  , snIDList
					  , statusCode
					  , deleteCode
					  , nickName
					  )
				VALUES (
						#{gwID}
					  , #{panID}
					  , #{GID}
					  , (SELECT GID FROM sdm_gateway WHERE gwID = #{gwID})
					  , #{topology}
					  , #{protocolStack}
					  , #{panChannel}
					  , #{supportedChannelList}
					  , #{supportedTopologyList}
					  , #{supportedProtocolStackList}
					  , #{supportedOperationList}
					  , #{supportedAttributeList}
					  , #{snIDList}
					  , #{statusCode}
					  , #{deleteCode}
					  , #{nickName}
					  )  
		]]>
	</insert>
	
	<update id="updatePan" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET topology 					= #{topology}
				 , protocolStack 				= #{protocolStack}
			  	 , panChannel 					= #{panChannel}
				 , supportedChannelList 		= #{supportedChannelList}
				 , supportedTopologyList 		= #{supportedTopologyList}
				 , supportedProtocolStackList 	= #{supportedProtocolStackList}
				 , supportedOperationList 		= #{supportedOperationList}
				 , supportedAttributeList 		= #{supportedAttributeList}
				 , snIDList						= #{snIDList}
				 , statusCode 					= #{statusCode}
				 , deleteCode 					= #{deleteCode}
				 , nickName 					= #{nickName}
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
		]]>
	</update>
	
	<update id="updatePanByID" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET topology 					= #{topology}
				 , protocolStack 				= #{protocolStack}
			  	 , panChannel 					= #{panChannel}
				 , supportedChannelList 		= #{supportedChannelList}
				 , supportedTopologyList 		= #{supportedTopologyList}
				 , supportedProtocolStackList 	= #{supportedProtocolStackList}
				 , supportedOperationList 		= #{supportedOperationList}
				 , supportedAttributeList 		= #{supportedAttributeList}
				 , snIDList						= #{snIDList}
				 , statusCode 					= #{statusCode}
				 , deleteCode 					= #{deleteCode}
				 , nickName 					= #{nickName}
			 WHERE GID = #{GID}
		]]>
	</update>
	
	<insert id="insertNode" parameterType="SNNodeVO">
		<![CDATA[
			INSERT INTO sdm_Node (
						gwID
					  , panID
					  , snID
					  , globalID
					  , manufacturer
					  , productNo
					  , location
					  , longitude
					  , latitude
					  , altitude
					  , role
					  , roleList
					  , parentNodeIDList
					  , supportedOperationList
					  , supportedAttributeList
					  , tdIDList
					  , monitoringMode
					  , monitoringPeriod
					  , statusCode
					  , position
					  , deleteCode
					  , nickName
					  )
				VALUES (
						#{gwID}
					  , #{panID}
					  , #{snID}
					  , #{globalID}
					  , #{manufacturer}
					  , #{productNo}
					  , #{location}
					  , #{longitude}
					  , #{latitude}
					  , #{altitude}
					  , #{role}
					  , #{roleList}
					  , #{parentNodeIDList}
					  , #{supportedOperationList}
					  , #{supportedAttributeList}
					  , #{tdIDList}
					  , #{monitoringMode}
					  , #{monitoringPeriod}
					  , #{statusCode}
					  , ST_POINTFROMTEXT('POINT(${X} ${Y})',0)
					  , #{deleteCode}
					  , #{nickName}
					  )  
		]]>
	</insert>
	
	<insert id="insertNodeByID" parameterType="SNNodeVO">
		<![CDATA[
			INSERT INTO sdm_Node (
						gwID
					  , panID
					  , snID
					  , GID
					  , gwGID
					  , panGID
					  , manufacturer
					  , productNo
					  , location
					  , longitude
					  , latitude
					  , altitude
					  , role
					  , roleList
					  , parentNodeIDList
					  , supportedOperationList
					  , supportedAttributeList
					  , tdIDList
					  , monitoringMode
					  , monitoringPeriod
					  , statusCode
					  , position
					  , deleteCode
					  , nickName
					  )
				VALUES (
						#{gwID}
					  , #{panID}
					  , #{snID}
					  , #{GID}
					  , (SELECT GID FROM sdm_gateway WHERE gwID = #{gwID})
					  , (SELECT GID FROM sdm_pan WHERE gwID = #{gwID} AND panID = #{panID})
					  , #{manufacturer}
					  , #{productNo}
					  , #{location}
					  , #{longitude}
					  , #{latitude}
					  , #{altitude}
					  , #{role}
					  , #{roleList}
					  , #{parentNodeIDList}
					  , #{supportedOperationList}
					  , #{supportedAttributeList}
					  , #{tdIDList}
					  , #{monitoringMode}
					  , #{monitoringPeriod}
					  , #{statusCode}
					  , ST_POINTFROMTEXT('POINT(${X} ${Y})',0)
					  , #{deleteCode}
					  , #{nickName}
					  )  
		]]>
	</insert>
	
	<update id="updateNode" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET globalID					= #{globalID}
				 , manufacturer				= #{manufacturer}
				 , productNo				= #{productNo}
				 , location					= #{location}
				 , longitude				= #{longitude}
				 , latitude					= #{latitude}
				 , altitude					= #{altitude}
				 , role						= #{role}
				 , roleList					= #{roleList}
				 , parentNodeIDList			= #{parentNodeIDList}
				 , supportedOperationList	= #{supportedOperationList}
				 , supportedAttributeList	= #{supportedAttributeList}
				 , tdIDList					= #{tdIDList}
				 , monitoringMode			= #{monitoringMode}
				 , monitoringPeriod			= #{monitoringPeriod}
				 , statusCode 				= #{statusCode}
				 , position					= ST_POINTFROMTEXT('POINT(${X} ${Y})',0)
				 , deleteCode 				= #{deleteCode}
				 , nickName					= #{nickName}
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
		]]>
	</update>
	
	<delete id="deleteNode" parameterType="SNNodeVO">
		<![CDATA[
			DELETE sdm_Node
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
		]]>
	</delete>
	
	<update id="updateNodeByID" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET gwID                     = #{gwID}
			     , panID                    = #{panID}
			     , snID                     = #{snID}
			     , manufacturer				= #{manufacturer}
				 , productNo				= #{productNo}
				 , location					= #{location}
				 , longitude				= #{longitude}
				 , latitude					= #{latitude}
				 , altitude					= #{altitude}
				 , role						= #{role}
				 , roleList					= #{roleList}
				 , parentNodeIDList			= #{parentNodeIDList}
				 , supportedOperationList	= #{supportedOperationList}
				 , supportedAttributeList	= #{supportedAttributeList}
				 , tdIDList					= #{tdIDList}
				 , monitoringMode			= #{monitoringMode}
				 , monitoringPeriod			= #{monitoringPeriod}
				 , statusCode 				= #{statusCode}
				 , position					= ST_POINTFROMTEXT('POINT(${X} ${Y})',0)
				 , deleteCode 				= #{deleteCode}
				 , nickName					= #{nickName}
			 WHERE GID = #{GID}
		]]>
	</update>
	
	<insert id="insertTransducer" parameterType="SNTransducerVO">
		<![CDATA[
			INSERT INTO sdm_Transducer (
						gwID
					  , panID
					  , snID
					  , tdID
					  , manufacturer
					  , productNo
					  , transducerCategory
					  , transducerType
					  , unit
					  , dataType
					  , rangeMin
					  , rangeMax
					  , rangeOffset
					  , level
					  , supportedOperationList
					  , supportedAttributeList
					  , statusCode
					  , actuationResult
					  , deleteCode
					  , nickName
					  )
				VALUES (
						#{gwID}
					  , #{panID}
					  , #{snID}
					  , #{tdID}
					  , #{manufacturer}
					  , #{productNo}
					  , #{transducerCategory}
					  , #{transducerType}
					  , #{unit}
					  , #{dataType}
					  , #{rangeMin}
					  , #{rangeMax}
					  , #{rangeOffset}
					  , #{level}
					  , #{supportedOperationList}
					  , #{supportedAttributeList}
					  , #{statusCode}
					  , #{actuationResult}
					  , #{deleteCode}
					  , #{nickName}
					  )  
		]]>
	</insert>
	
	<update id="updateTransducer" parameterType="SNTransducerVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET manufacturer				= #{manufacturer}
			  	 , productNo				= #{productNo}
				 , transducerCategory		= #{transducerCategory}
				 , transducerType			= #{transducerType}
				 , unit						= #{unit}
				 , dataType					= #{dataType}
				 , rangeMin					= #{rangeMin}
				 , rangeMax					= #{rangeMax}
				 , rangeOffset				= #{rangeOffset}
				 , level					= #{level}
				 , supportedOperationList	= #{supportedOperationList}
				 , supportedAttributeList	= #{supportedAttributeList}
				 , statusCode 				= #{statusCode}
				 , actuationResult			= #{actuationResult}
				 , deleteCode 				= #{deleteCode}
				 , nickName 				= #{nickName}
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
			   AND tdID  = #{tdID}
		]]>
	</update>
	
	<update id="updateGatewayGwID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Gateway
			   SET gwID = #{newGwID}
			 WHERE gwID = #{gwID}
		]]>
	</update>
	<update id="updatePanGwID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET gwID = #{newGwID}
			 WHERE gwID = #{gwID}
		]]>
	</update>
	<update id="updateNodeGwID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET gwID = #{newGwID}
			 WHERE gwID = #{gwID}
		]]>
	</update>
	<update id="updateTransducerGwID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET gwID = #{newGwID}
			 WHERE gwID = #{gwID}
		]]>
	</update>
	
	<update id="updatePanPanID" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET gwID  = #{newGwID}
			     , panID = #{newPanID}
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
		]]>
	</update>
	<update id="updateNodePanID" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET gwID  = #{newGwID}
			     , panID = #{newPanID}
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
		]]>
	</update>
	<update id="updateTransducerPanID" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET gwID  = #{newGwID}
			     , panID = #{newPanID}
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
		]]>
	</update>
	
	<update id="updateNodeSnID" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET gwID  = #{newGwID}
			     , panID = #{newPanID}
			     , snID  = #{newSnID}
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
		]]>
	</update>
	<update id="updateTransducerSnID" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET gwID  = #{newGwID}
			     , panID = #{newPanID}
			     , snID  = #{newSnID}
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
		]]>
	</update>
	
	<update id="updateTransducerTdID" parameterType="SNTransducerVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET gwID  = #{newGwID}
			     , panID = #{newPanID}
			     , snID  = #{newSnID}
			     , tdID  = #{newTdID}
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
			   AND tdID  = #{tdID}
		]]>
	</update>
	
	<update id="updateGatewayGwIDByGID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Gateway
			   SET gwID = #{newGwID}
			 WHERE GID = #{GID}
		]]>
	</update>
	<update id="updatePanGwIDByGID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET gwID = #{newGwID}
			 WHERE gwGID = #{GID}
		]]>
	</update>
	<update id="updateNodeGwIDByGID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET gwID = #{newGwID}
			 WHERE gwGID = #{GID}
		]]>
	</update>
	<update id="updateTransducerGwIDByGID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET gwID = #{newGwID}
			 WHERE gwGID = #{GID}
		]]>
	</update>
	
	<update id="updatePanPanIDByGID" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET gwID  = #{newGwID}
			     , panID = #{newPanID}
			 WHERE GID = #{GID}
		]]>
	</update>
	<update id="updateNodePanIDByGID" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET gwID  = #{newGwID}
			     , panID = #{newPanID}
			 WHERE panGID = #{GID}
		]]>
	</update>
	<update id="updateTransducerPanIDByGID" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET gwID  = #{newGwID}
			     , panID = #{newPanID}
			 WHERE panGID = #{GID}
		]]>
	</update>
	
	<update id="updateNodeSnIDByGID" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET gwID  = #{newGwID}
			     , panID = #{newPanID}
			     , snID  = #{newSnID}
			 WHERE GID = #{GID}
		]]>
	</update>
	<update id="updateTransducerSnIDByGID" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET gwID  = #{newGwID}
			     , panID = #{newPanID}
			     , snID  = #{newSnID}
			 WHERE snGID = #{GID}
		]]>
	</update>
	
	<select id="updateGatewayAddress" parameterType="SNGatewayVO">
		{ CALL sdm_sp_updateGatewayAddress('${gwID}', '${newGwID}')	}
	</select>
	
	<select id="updatePanAddress" parameterType="SNPanVO">
		{ CALL sdm_sp_updatePanAddress('${gwID}', '${panID}', '${newGwID}', '${newPanID}') }
	</select>
	
	<select id="updateNodeAddress" parameterType="SNNodeVO">
		{ CALL sdm_sp_updateNodeAddress('${gwID}', '${panID}', '${snID}', '${newGwID}', '${newPanID}', '${newSnID}') }
	</select>
	
	<select id="updateTransducerAddress" parameterType="SNTransducerVO">
		{ CALL sdm_sp_updateTransducerAddress('${gwID}', '${panID}', '${snID}', '${tdID}', '${newGwID}', '${newPanID}', '${newSnID}', '${newTdID}') }
	</select>
	
	<update id="updateGatewayDeleteCode" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Gateway
			   SET deleteCode = 1 
			 WHERE gwID  = #{gwID}
		]]>
	</update>
	<update id="updatePanDeleteCodeGw" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET deleteCode = 1 
			 WHERE gwID  = #{gwID}
		]]>
	</update>
	<update id="updateNodeDeleteCodeGw" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET deleteCode = 1 
			 WHERE gwID  = #{gwID}
		]]>
	</update>
	<update id="updateTransducerDeleteCodeGw" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET deleteCode = 1 
			 WHERE gwID  = #{gwID}
		]]>
	</update>
	
	<update id="updatePanDeleteCode" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET deleteCode = 1 
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
		]]>
	</update>
	<update id="updateNodeDeleteCodePan" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET deleteCode = 1 
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
		]]>
	</update>
	<update id="updateTransducerDeleteCodePan" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET deleteCode = 1 
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
		]]>
	</update>
	
	<update id="updateNodeDeleteCode" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET deleteCode = 1 
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
		]]>
	</update>
	<update id="updateTransducerDeleteCodeSn" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET deleteCode = 1 
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
		]]>
	</update>
	
	<update id="updateTransducerDeleteCode" parameterType="SNTransducerVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET deleteCode = 1 
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
			   AND tdID  = #{tdID}
		]]>
	</update>
	
	<update id="updateGatewayDeleteCodeByGID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Gateway
			   SET deleteCode = 1 
			 WHERE GID = #{GID}
		]]>
	</update>
	<update id="updatePanDeleteCodeGwByGID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET deleteCode = 1 
			 WHERE gwGID = #{GID}
		]]>
	</update>
	<update id="updateNodeDeleteCodeGwByGID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET deleteCode = 1 
			 WHERE gwGID = #{GID}
		]]>
	</update>
	<update id="updateTransducerDeleteCodeGwByGID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET deleteCode = 1 
			 WHERE gwGID = #{GID}
		]]>
	</update>
	
	<update id="updatePanDeleteCodeByGID" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET deleteCode = 1 
			 WHERE GID = #{GID}
		]]>
	</update>
	<update id="updateNodeDeleteCodePanByGID" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET deleteCode = 1 
			 WHERE panGID = #{GID}
		]]>
	</update>
	<update id="updateTransducerDeleteCodePanByGID" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET deleteCode = 1 
			 WHERE panGID = #{GID}
		]]>
	</update>
	
	<update id="updateNodeDeleteCodeByGID" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET deleteCode = 1 
			 WHERE GID = #{GID}
		]]>
	</update>
	<update id="updateTransducerDeleteCodeSnByGID" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET deleteCode = 1 
			 WHERE snGID = #{GID}
		]]>
	</update>
	
	<select id="selectSensingValueRange" parameterType="SNSensingValueVO" resultType="egovMap">
		<![CDATA[
			SELECT rangeMin
				 , rangeMax
			  FROM sdm_Transducer
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
			   AND tdID  = #{tdID}
		]]>
	</select>
	
	<insert id="insertSensingValue" parameterType="SNSensingValueVO">
		<![CDATA[
			INSERT INTO sdm_SensingValue (
						gwID
					  , panID
					  , snID
					  , tdID
					  , reportTime
					  , sensingTime
					  , sensorType
					  , sensingValue
					  , snGID
					  )
				VALUES (
						#{gwID}
					  , #{panID}
					  , #{snID}
					  , #{tdID}
					  , #{reportTime}
					  , #{sensingTime}
					  , #{sensorType}
					  , #{sensingValue}
					  , (SELECT GID FROM sdm_Node WHERE gwID = #{gwID} AND panID = #{panID} AND snID = #{snID})
					  )  
		]]>
	</insert>
	
	<delete id="deleteSensingValueLatest" parameterType="SNSensingValueVO">
		<![CDATA[
			DELETE sdm_SensingValueLatest
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
			   AND tdID  = #{tdID}
		]]>
	</delete>
	
	<insert id="insertSensingValueLatest" parameterType="SNSensingValueVO">
		<![CDATA[
			INSERT INTO sdm_SensingValueLatest (
						gwID
					  , panID
					  , snID
					  , tdID
					  , reportTime
					  , sensingTime
					  , sensorType
					  , sensingValue
					  , snGID
					  )
				VALUES (
						#{gwID}
					  , #{panID}
					  , #{snID}
					  , #{tdID}
					  , #{reportTime}
					  , #{sensingTime}
					  , #{sensorType}
					  , #{sensingValue}
					  , (SELECT GID FROM sdm_Node WHERE gwID = #{gwID} AND panID = #{panID} AND snID = #{snID})
					  )  
		]]>
	</insert>
	
	<insert id="insertSensingValueInvalid" parameterType="SNSensingValueVO">
		<![CDATA[
			INSERT INTO sdm_SensingValueInvalid (
						gwID
					  , panID
					  , snID
					  , tdID
					  , reportTime
					  , sensingTime
					  , sensorType
					  , sensingValue
					  , snGID
					  )
				VALUES (
						#{gwID}
					  , #{panID}
					  , #{snID}
					  , #{tdID}
					  , #{reportTime}
					  , #{sensingTime}
					  , #{sensorType}
					  , #{sensingValue}
					  , (SELECT GID FROM sdm_Node WHERE gwID = #{gwID} AND panID = #{panID} AND snID = #{snID})
					  )  
		]]>
	</insert>
	
	<select id="selectSensingValueRangeByGID" parameterType="SNSensingValueVO" resultType="egovMap">
		<![CDATA[
			SELECT rangeMin
				 , rangeMax
			  FROM sdm_Transducer
			 WHERE gwID  = (SELECT gwID  FROM sdm_Node WHERE GID = #{GID})
			   AND panID = (SELECT panID FROM sdm_Node WHERE GID = #{GID})
			   AND snID  = (SELECT snID  FROM sdm_Node WHERE GID = #{GID})
			   AND tdID  = #{tdID}
		]]>
	</select>
	
	<insert id="insertSensingValueByGID" parameterType="SNSensingValueVO">
		<![CDATA[
			INSERT INTO sdm_SensingValue (
						gwID
					  , panID
					  , snID
					  , tdID
					  , reportTime
					  , sensingTime
					  , sensorType
					  , sensingValue
					  , snGID
					  )
				VALUES (
						(SELECT gwID  FROM sdm_node WHERE GID = #{snGID})
					  , (SELECT panID FROM sdm_node WHERE GID = #{snGID})
					  , (SELECT snID  FROM sdm_node WHERE GID = #{snGID})
					  , #{tdID}
					  , #{reportTime}
					  , #{sensingTime}
					  , #{sensorType}
					  , #{sensingValue}
					  , #{snGID}
					  )  
		]]>
	</insert>
	
	<delete id="deleteSensingValueLatestByGID" parameterType="SNSensingValueVO">
		<![CDATA[
			DELETE sdm_SensingValueLatest
			 WHERE snGID = #{snGID}
			   AND tdID  = #{tdID}
		]]>
	</delete>
	
	<insert id="insertSensingValueLatestByGID" parameterType="SNSensingValueVO">
		<![CDATA[
			INSERT INTO sdm_SensingValueLatest (
						gwID
					  , panID
					  , snID
					  , tdID
					  , reportTime
					  , sensingTime
					  , sensorType
					  , sensingValue
					  , snGID
					  )
				VALUES (
						(SELECT gwID  FROM sdm_node WHERE GID = #{snGID})
					  , (SELECT panID FROM sdm_node WHERE GID = #{snGID})
					  , (SELECT snID  FROM sdm_node WHERE GID = #{snGID})
					  , #{tdID}
					  , #{reportTime}
					  , #{sensingTime}
					  , #{sensorType}
					  , #{sensingValue}
					  , #{snGID}
					  )  
		]]>
	</insert>
	
	<insert id="insertSensingValueInvalidByGID" parameterType="SNSensingValueVO">
		<![CDATA[
			INSERT INTO sdm_SensingValueInvalid (
						gwID
					  , panID
					  , snID
					  , tdID
					  , reportTime
					  , sensingTime
					  , sensorType
					  , sensingValue
					  , snGID
					  )
				VALUES (
						(SELECT gwID  FROM sdm_node WHERE GID = #{snGID})
					  , (SELECT panID FROM sdm_node WHERE GID = #{snGID})
					  , (SELECT snID  FROM sdm_node WHERE GID = #{snGID})
					  , #{tdID}
					  , #{reportTime}
					  , #{sensingTime}
					  , #{sensorType}
					  , #{sensingValue}
					  , #{snGID}
					  )  
		]]>
	</insert>
	
	<select id="selectLeakageThreshold" parameterType="SNSensingValueVO" resultType="egovMap">
		<![CDATA[
			SELECT operator
			     , operand
			     , counter
			     , counterLimit
			  FROM sdm_LeakageThreshold
             WHERE snGID             = #{GID}
               AND UPPER(sensorType) = UPPER(#{sensorType})
		]]>
	</select>
	<update id="updateLeakageThresholdCounter" parameterType="SNSensingValueVO">
		<![CDATA[
			UPDATE sdm_LeakageThreshold
			   SET counter = #counter#
			 WHERE snGID             = #{GID}
			   AND UPPER(sensorType) = UPPER(#{sensorType})
		]]>
	</update>
	<update id="updateLeakageThresholdCounter2" parameterType="SNSensingValueVO">
		<![CDATA[
			UPDATE sdm_LeakageThreshold
			   SET operand = #{sensingValue}
			     , counter = #{counter}
			 WHERE snGID             = #{GID}
			   AND UPPER(sensorType) = UPPER(#{sensorType})
		]]>
	</update>
	
	<select id="selectSensingValueThreshold" parameterType="SNSensingValueVO" resultType="egovMap">
		<![CDATA[
			SELECT operator1
			     , operand1
			     , logicalOp
			     , operator2
			     , operand2
			  FROM sdm_SensingValueThreshold
             WHERE UPPER(sensorType) = UPPER(#{sensorType})
		]]>
	</select>
	<select id="selectNodeRelatedWaterPipe" parameterType="SNSensingValueVO" resultType="egovMap">
		<![CDATA[
			SELECT c.pipe_ftr_idn AS ftr_idn
			  FROM sdm_Node a
			     , sdm_NodeGeoRel b
				 , sdm_WaterPipeManholeRel c
			 WHERE a.gwID    = #{gwID}
			   AND a.panID   = #{panID}
			   AND a.snID    = #{snID}
			   AND a.GID     = b.nodegid
			   AND b.endTime = 0
			   AND b.ftr_idn = c.manhole_ftr_idn
		]]>
	</select>
	<select id="selectNodeRelatedWaterPipeByGID" parameterType="SNSensingValueVO" resultType="egovMap">
		<![CDATA[
			SELECT c.pipe_ftr_idn AS ftr_idn
			  FROM sdm_Node a
			     , sdm_NodeGeoRel b
				 , sdm_WaterPipeManholeRel c
			 WHERE a.GID     = #{snGID}
			   AND a.GID     = b.nodegid
			   AND b.endTime = 0
			   AND b.ftr_idn = c.manhole_ftr_idn
		]]>
	</select>
	<update id="updateWaterPipeLekSig" parameterType="SNSensingValueVO">
		<![CDATA[
			UPDATE sdm_WaterPipeSri
			   SET lek_sig = #{sensingValue}
			 WHERE ftr_idn IN (${geoIDList})
		]]>
	</update>
	<select id="selectWaterPipeSRI" parameterType="SNSriVO" resultType="egovMap">
		<![CDATA[
			SELECT *
			  FROM sdm_WaterPipeSri
			 WHERE ftr_idn = #{geoID}
		]]>
	</select>
	<update id="updateWaterPipeSRI" parameterType="SNSriVO">
		<![CDATA[
			UPDATE sdm_WaterPipeSri
			   SET wtl_sta = #{assessValue}
			     , wtl_sri = #{sriValue}
			     , wtl_lev = #{sriGrade}
			 WHERE ftr_idn = #{geoID}
		]]>
	</update>
	<select id="selectGridWaterSRI" parameterType="SNSriVO" resultType="egovMap">
		<![CDATA[
			SELECT a.cellid
			     , MAX(c.wtl_sri) as sri
			  FROM sdm_SriGrid a
                 , sdm_WaterPipe b
                 , sdm_WaterPipeSri c
             WHERE a.cellid IN (SELECT b.cellid
                                  FROM sdm_WaterPipe a
                                     , sdm_SriGrid b
                                 WHERE a.ftr_idn = #{geoID}
                                   AND ST_INTERSECTS(a.geom, b.geom) = 1 )
               AND ST_INTERSECTS(a.geom, b.geom) = 1
               AND b.ftr_idn = c.ftr_idn
          GROUP BY a.cellid
		]]>
	</select>
	<update id="updateGridWaterSRI" parameterType="SNSriGridVO">
		<![CDATA[
			UPDATE sdm_SriGrid
               SET waterSri   = #{sri}
                 , waterGrade = #{grade}
                 , lastUpdate = #{lastUpdate}
             WHERE cellID = #{cellID}
		]]>
	</update>
	<select id="selectGridDrainSRI" parameterType="SNSriVO" resultType="egovMap">
		<![CDATA[
			SELECT a.cellid
			     , MAX(c.sew_sri) as sri
			  FROM sdm_SriGrid a
                 , sdm_DrainPipe b
                 , sdm_DrainPipeSri c
             WHERE a.cellid IN (SELECT b.cellid
                                  FROM sdm_DrainPipe a
                                     , sdm_SriGrid b
                                 WHERE a.ftr_idn = #{geoID}
                                   AND ST_INTERSECTS(a.geom, b.geom) = 1 )
               AND ST_INTERSECTS(a.geom, b.geom) = 1
               AND b.ftr_idn = c.ftr_idn
          GROUP BY a.cellid
		]]>
	</select>
	<update id="updateGridDrainSRI" parameterType="SNSriGridVO">
		<![CDATA[
			UPDATE sdm_SriGrid
               SET drainSri   = #{sri}
                 , drainGrade = #{grade}
                 , lastUpdate = #{lastUpdate}
             WHERE cellID = #{cellID}
		]]>
	</update>
	
	<insert id="insertBinaryValue" parameterType="SNSensingValueVO">
		<![CDATA[
			INSERT INTO sdm_SensingValueBinary (
						gwID
					  , panID
					  , snID
					  , tdID
					  , reportTime
					  , sensingTime
					  , sensorType
					  , sensingValue
					  )
				VALUES (
						#{gwID}
					  , #{panID}
					  , #{snID}
					  , #{tdID}
					  , #{reportTime}
					  , #{sensingTime}
					  , #{sensorType}
					  , #{binaryValue}
					  )  
		]]>
	</insert>
	
	<insert id="insertBinaryValueByGID" parameterType="SNSensingValueVO">
		<![CDATA[
			INSERT INTO sdm_SensingValueBinary (
						gwID
					  , panID
					  , snID
					  , tdID
					  , reportTime
					  , sensingTime
					  , sensorType
					  , sensingValue
					  , snGID
					  )
				VALUES (
						(SELECT gwID  FROM sdm_node WHERE GID = #{snGID})
					  , (SELECT panID FROM sdm_node WHERE GID = #{snGID})
					  , (SELECT snID  FROM sdm_node WHERE GID = #{snGID})
					  , #{tdID}
					  , #{reportTime}
					  , #{sensingTime}
					  , #{sensorType}
					  , #{binaryValue}
					  , #{snGID}
					  )  
		]]>
	</insert>
	
	<update id="updateActuationResult" parameterType="SNTransducerVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET actuationResult = #{actuationResult} 
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
			   AND tdID  = #{tdID}
		]]>
	</update>
	
	<update id="updateActuationResultByGID" parameterType="SNTransducerVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET actuationResult = #{actuationResult} 
			 WHERE snGID = #{snGID}
			   AND tdID  = #{tdID}
		]]>
	</update>
	
	<update id="updateGatewayStatusCode" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Gateway
			   SET statusCode = #{statusCode} 
			 WHERE gwID  = #{gwID}
		]]>
	</update>
	<update id="updatePanStatusCode" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET statusCode = #{statusCode} 
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
		]]>
	</update>
	<update id="updateNodeStatusCode" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET statusCode = #{statusCode} 
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
		]]>
	</update>
	<update id="updateTransducerStatusCode" parameterType="SNTransducerVO">
		<![CDATA[
			UPDATE sdm_Transducer
			   SET statusCode = #{statusCode} 
			 WHERE gwID  = #{gwID}
			   AND panID = #{panID}
			   AND snID  = #{snID}
			   AND tdID  = #{tdID}
		]]>
	</update>
	
	<update id="updateGatewayStatusCodeByGID" parameterType="SNGatewayVO">
		<![CDATA[
			UPDATE sdm_Gateway
			   SET statusCode = #{statusCode} 
			 WHERE GID = #{GID}
		]]>
	</update>
	<update id="updatePanStatusCodeByGID" parameterType="SNPanVO">
		<![CDATA[
			UPDATE sdm_Pan
			   SET statusCode = #{statusCode} 
			 WHERE GID = #{GID}
		]]>
	</update>
	<update id="updateNodeStatusCodeByGID" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET statusCode = #{statusCode} 
			 WHERE GID = #{GID}
		]]>
	</update>
	
	<select id="selectNearestGeoObject" parameterType="SNNodeVO" resultType="egovMap">
		<![CDATA[
			SELECT ftr_cde    AS ftrcde
			     , ftr_idn    AS ftridn
			     , ST_X(geom) AS X
			     , ST_Y(geom) AS Y
			  FROM ${geoTable}
			 WHERE ST_NEAREST(geom, ST_POINTFROMTEXT('POINT(${X} ${Y})',0),1) = 1
			   AND ST_DISTANCE(geom, ST_POINTFROMTEXT('POINT(${X} ${Y})',0)) <= 10 
		]]>
	</select>
	<select id="selectExistingNodeGeoRel" parameterType="SNNodeVO" resultType="egovMap">
		<![CDATA[
			SELECT NVL(MAX('Y'),'N') AS existYn
			  FROM sdm_NodeGeoRel
			 WHERE nodeGID = #{GID}
			   AND ftr_cde = #{ftr_cde}
			   AND ftr_idn = #{ftr_idn}
			   AND endTime = #{endTime} 
		]]>
	</select>
	<update id="updateOldNodeGeoRel" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_NodeGeoRel
			   SET endTime = #{currentTime}
			 WHERE nodeGID = #{GID}
			   AND endTime = #{endTime}
		]]>
	</update>
	<insert id="insertNodeGeoRel" parameterType="SNNodeVO">
		<![CDATA[
			INSERT INTO sdm_NodeGeoRel
			           (nodeGID
			          , startTime
			          , endTime
			          , ftr_cde
			          , ftr_idn
			          , gwID
			          , panID
			          , snID
			          , position )
			    VALUES (#{GID}
			          , #{currentTime}
			          , #{endTime}
			          , #{ftr_cde}
			          , #{ftr_idn}
			          , (SELECT gwID  FROM sdm_Node WHERE GID = #{GID}) 
			          , (SELECT panID FROM sdm_Node WHERE GID = #{GID}) 
			          , (SELECT snID  FROM sdm_Node WHERE GID = #{GID}) 
			          , ST_POINTFROMTEXT('POINT(${X} ${Y})',0)
			          )
		]]>
	</insert>
	<update id="updateNodeGeoID" parameterType="SNNodeVO">
		<![CDATA[
			UPDATE sdm_Node
			   SET ftr_cde   = #{ftr_cde}
			     , ftr_idn   = #{ftr_idn}
			     , longitude = #{longitude}
			     , latitude  = #{latitude}
			     , position  = ST_POINTFROMTEXT('POINT(${X} ${Y})',0) 
			 WHERE GID = #{GID}
		]]>
	</update>
	
</mapper>